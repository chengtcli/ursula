[uwsgi]
master = true
processes = {{ keystone.public_workers }}
chmod-socket = 666

{% if os == 'ubuntu' %}
home = {{ keystone.uwsgi.ubuntu_home }}
{% endif %}
pidfile = /run/uwsgi/keystone-main.pid
logto = /var/log/keystone/keystone-all.log
logfile-chmod = 644

{% if keystone.uwsgi.method == 'socket' %}
socket = /run/uwsgi/keystone-main.socket
{% else %}
http-socket = 127.0.0.1:{{ keystone.uwsgi.http_port.public }}
{% endif %}

name = keystone
uid = keystone
gid = keystone

plugins = python

{% if os == 'ubuntu' %}
wsgi-file = /usr/local/bin/keystone-wsgi-public
{% else %}
wsgi-file = /bin/keystone-wsgi-public
{% endif %}